(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){e.exports=a(226)},112:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a(0),l=a.n(r),o=a(39),c=a.n(o),s=a(99),i=a(90),u=a(6),m=a(19),d=a(29),p=(a(63),{display:"flex",justifyContent:"center",width:"100%",minHeight:"100%"}),b=function(e){var t=e.children;return l.a.createElement("div",{style:p},l.a.createElement("div",{className:"appcontainer content-box"},t))},f=a(28),g=a.n(f);!g.a.env.NODE_ENV||g.a.env.NODE_ENV;a(64),a(112);var E=function(e){var t=e.linkUrl,a=e.buttonText,n="header-button"+(t===e.currentUrl?" header-button-selected":"");return l.a.createElement(d.b,{to:t,className:n},l.a.createElement("div",null,a))},h=function(){var e=Object(m.g)().pathname;return l.a.createElement("div",{className:"header-container"},l.a.createElement("div",{className:"flex-box-vert-align"},l.a.createElement("div",{className:"flex-box-vert-align overflow-y",style:{flex:4,justifyContent:"space-between"}},l.a.createElement("div",{className:"flex-box-vert-align"},l.a.createElement(E,{linkUrl:"/modellist",buttonText:"Model Viewer",currentUrl:e}),l.a.createElement(E,{linkUrl:"/modelupload",buttonText:"Model Upload",currentUrl:e}),l.a.createElement(E,{linkUrl:"/dataViewer",buttonText:"Data Viewer",currentUrl:e})))))},v=a(92),y=a(12),O=(a(65),a(93)),x={scales:{yAxes:[{display:!0,ticks:{suggestedMin:0,suggestedMax:10,beginAtZero:!0}}],xAxes:[{scaleLabel:{display:!0,labelString:"epoch"}}]}},k=function(e){var t=e.modelData;return l.a.createElement("div",{className:"model-box"},l.a.createElement("div",{className:"model-box-text",style:{paddingRight:"40px"}},l.a.createElement("h1",{style:{margin:0}},t.name),l.a.createElement("br",null),l.a.createElement("div",{style:{fontSize:"1.4em"}},"Test loss:","  ",l.a.createElement("span",{style:{fontWeight:"bold"}},t.loss.toFixed(1))),l.a.createElement("br",null),l.a.createElement("div",null,"Upload date:","  ",l.a.createElement("span",{style:{fontWeight:"bold"}},t.uploadDate)),l.a.createElement("br",null),l.a.createElement("div",null,"Regularizer:","  ",l.a.createElement("span",{style:{fontWeight:"bold"}},t.regularizer)),l.a.createElement("br",null),l.a.createElement("div",null,"Optimizer:","  ",l.a.createElement("span",{style:{fontWeight:"bold"}},t.optimizer)),l.a.createElement("br",null)),l.a.createElement("div",{className:"model-box-text"},l.a.createElement(O.a,{data:t.data,options:x})))},j=[{name:"Model 1",uploadDate:"23/03/2020",regressionType:"-//-",optimizer:"adam",regularizer:"none",features:["number of steps","calls per week","post code as world coordinates"],trainingAccuracyHistory:[.1,.33,.67,.74,.78,.82,.85,.85,.85],trainingLossHistory:[5,5.2,4.9,4.8,5.1,4.9,5.3,5.1],testAccuracy:.85,loss:5.1,comments:["This model performed well","dropping that one feature from learning helped"],data:{labels:Array(10).fill(""),datasets:[{label:"Loss",data:[4.7,4.6,4.9,5.1,5,5.2,4.9,4.8,4.6,5],backgroundColor:["rgba(255, 99, 132, 0.0)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}},{name:"Model 2",uploadDate:"24/03/2020",regressionType:"-//-",optimizer:"sgd",regularizer:"L2",features:["number of steps","calls per week","post code as world coordinates"],trainingAccuracyHistory:[.1,.33,.67,.74,.78,.82,.85,.85,.85],trainingLossHistory:[4.7,4.6,4.9,5.1,5,5.2,4.9],testAccuracy:.85,loss:5,comments:["This model performed well","dropping that one feature from learning helped"],data:{labels:Array(10).fill(""),datasets:[{label:"Loss",data:[5,5.2,4.9,4.8,5.1,4.9,5.3,5.1,5,4.9,4.8],backgroundColor:["rgba(255, 99, 132, 0.0)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}}],w=function(){var e=Object(r.useState)(null),t=Object(y.a)(e,2),a=t[0],n=t[1];return l.a.createElement("div",{className:"model-list-container"},l.a.createElement("div",{className:"filter-box"},l.a.createElement("input",{type:"text",placeholder:"Search by model name",onChange:function(e){return n(e.target.value)}})),j.filter((function(e){var t=e.name;if(!a)return!0;var n,r=a.split(" "),l=Object(v.a)(r);try{for(l.s();!(n=l.n()).done;){var o=n.value;if(-1!==t.indexOf(o))return!0}}catch(c){l.e(c)}finally{l.f()}return!1})).map((function(e){return l.a.createElement(k,{key:e.name,modelData:e})})))},S=a(20),N=a.n(S),C=a(31),T=a(41),A=a.n(T),I=function(e){var t=e.onClick,a=e.enabled;return l.a.createElement("button",{onClick:t,disabled:!a},"Upload model")},U=(a(222),"NONE"),D="PENDING",R="DONE",z="ERROR",M=function(){var e=Object(r.useState)({fileIsH5:null}),t=Object(y.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(null),c=Object(y.a)(o,2),s=c[0],i=c[1],u=Object(r.useState)(U),m=Object(y.a)(u,2),d=m[0],p=m[1],b=function(){var e=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0],i(a),p(U),console.log(a),a.name.indexOf(".h5")>-1){e.next=8;break}return n({fileIsH5:!1}),e.abrupt("return");case 8:n({fileIsH5:!0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=null!=a.fileIsH5,g=!0===a.fileIsH5,E=function(){var e=Object(C.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(D),t.preventDefault(),(a=new FormData).append("tf_model",s),e.prev=4,e.next=7,A.a.post("/api/model/upload",a,{headers:{"Content-Type":"multipart/form-data"}});case 7:200===e.sent.status?p(R):p(z),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("h2",null,"Model Upload"),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("input",{type:"file",id:"modelFileUpload",onChange:b})),l.a.createElement("br",null),f?!0===a.fileIsH5?l.a.createElement("h3",null,"Model is ready to upload"):l.a.createElement("h3",{className:"red"},"File with he model must be .h5 format."):l.a.createElement("h3",null,"Please choose a .h5 file to upload."),l.a.createElement("br",null),l.a.createElement(I,{onClick:E,enabled:g}),l.a.createElement("br",null),d===D?l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"yellow"},"Model is being uploaded and converted to TF Lite..."," "),l.a.createElement("h5",null,"This may take up to 15 seconds")):null,d===R?l.a.createElement("h3",{className:"green"},"Model uploaded and converted to TF Lite successfully"):null,d===z?l.a.createElement("h3",{className:"red"},"An error has occured during the upload. Please try again"):null)},H=(a(223),a(245)),L=a(249),W=a(252),F=a(255),V=a(247),P=a(250),_=a(251),J=a(248),G=a(253).a,B=Object(H.a)({table:{minWidth:650}}),Z={supportCode:"Support Code",wellBeingScore:"Wellbing Score",weeklySteps:"Weekly Steps",weeklyCalls:"Weekly Calls",errorRate:"Error Rate",postCode:"Post Code"},q=function(e){var t=e.data,a=B();return l.a.createElement(V.a,{component:J.a},l.a.createElement(L.a,{className:a.table,"aria-label":"simple table"},l.a.createElement(P.a,null,l.a.createElement(_.a,null,Object.keys(t[0]).map((function(e){return l.a.createElement(F.a,null,Z[e])})))),l.a.createElement(W.a,null,t.map((function(e){return l.a.createElement(_.a,{key:e.id},Object.values(e).map((function(e){return l.a.createElement(F.a,{key:G(),component:"th",scope:"row"},e)})))})))))},K=function(){var e=Object(r.useState)(null),t=Object(y.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(null),c=Object(y.a)(o,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){var e=function(e){return new Promise((function(t){return setTimeout(t,e)}))};(function(){var t=Object(C.a)(N.a.mark((function t(){var a,r,l,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(500);case 2:return a={headers:{"Content-Type":"application/json"}},r=JSON.stringify({}),t.prev=4,t.next=7,A.a.get("./api/data/",r,a);case 7:l=t.sent,console.log(l.data),o=l.data,n(o.data.map((function(e){return JSON.parse(e)}))),i(o.numberOfEntries),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(){return t.apply(this,arguments)}})()()})),l.a.createElement("div",null,l.a.createElement("h1",null," The Aggregator "),s?l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Total entries: ",s),l.a.createElement("br",null),l.a.createElement("h3",null,"Latest ",Math.min(s,10)," entries:"),l.a.createElement(q,{data:a})):l.a.createElement("h3",null,"Loading data..."))},Q=function(){return l.a.createElement(d.a,null,l.a.createElement(h,null),l.a.createElement(b,null,l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/modellist",component:w}),l.a.createElement(m.a,{path:"/modelupload",component:M}),l.a.createElement(m.a,{path:"/dataViewer",component:K}))))},X=a(10),Y=a(95),$=a(96),ee=a(60);var te={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},ae=Object(X.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"REGISTER_SUCCESS":return localStorage.setItem("token",n.token),Object(ee.a)({},e,{},n,{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(ee.a)({},e,{},n,{isAuthenticated:!0,loading:!1});default:return e}}}),ne=a(97),re=a.n(ne),le=a(98),oe=a.n(le),ce=a(61),se=[$.a],ie={key:"root",storage:re.a,stateReconciler:oe.a},ue=Object(ce.a)(ie,ae),me=Object(X.createStore)(ue,{},Object(Y.composeWithDevTools)(X.applyMiddleware.apply(void 0,se))),de={store:me,persistor:Object(ce.b)(me)},pe=de.store,be=de.persistor,fe=Object(u.a)((function(e){var t;return{"@global":{html:(t={},Object(n.a)(t,e.breakpoints.up("sm"),{fontSize:"1.1em"}),Object(n.a)(t,e.breakpoints.up("md"),{fontSize:"1.4em"}),Object(n.a)(t,e.breakpoints.up("lg"),{fontSize:"1.5em"}),t)}}}))(Q);c.a.render(l.a.createElement(s.a,{store:pe},l.a.createElement(i.a,{loading:null,persistor:be},l.a.createElement(fe,null))),document.getElementById("root"))},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){}},[[103,1,2]]]);
//# sourceMappingURL=main.c668e6bd.chunk.js.map